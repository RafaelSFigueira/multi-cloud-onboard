{% extends 'restaurantes/navbar.html' %}
{% block content %}
<head>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
</head>
<center>
        
    <h2 style="color: white"> Visualizar Estatísticas 
        {% if restaurante is not None%}
        do restaurante: {{restaurante.nome}}
        {% endif %}
    </h2>
    
    </center>
    <br>
<div class="container" >
    <ul class="nav nav-tabs">
        <li class="active"><a href="" style="color: black">Estatística do espaço</a></li>
        <li class="dropdown">
     
        <li><a href="" style="color: white">Estatística de produtos do menu
        </a></li>
        <li><a href="contratos_template.html" style="color: white">Estatística de desempenho dos funcionários</a></li>
    </ul>
    <br>
    <div class="container"  style="background-color: white; border: 2px solid black; border-radius: 10px; ">
        <br>
        <ul class="nav nav-tabs">
            {% if e_id == 1%}
            <li class="active"><a href="{% url 'VisualizarEstatisticas_epaco_1' %}?res_id={{res_id}}&res_id2={{res_id2}}&dateStart={{dateStart}}&dateEnd={{dateEnd}}&timeStart={{timeStart}}&timeEnd={{timeEnd}}" style="color: black">Número médio de pessoas por grupo</a></li>
            {%else%}
            <li><a href="{% url 'VisualizarEstatisticas_epaco_1' %}?res_id={{res_id}}&res_id2={{res_id2}}&dateStart={{dateStart}}&dateEnd={{dateEnd}}&timeStart={{timeStart}}&timeEnd={{timeEnd}}" style="color: black">Número médio de pessoas por grupo</a></li>
            {% endif %}
            <li><a href="" style="color: black">Afluência por zona do restaurante</a></li>
            {% if e_id == 3%}
            <li class="active"><a href="{% url 'VisualizarEstatisticas_epaco_3' %}?res_id={{res_id}}&res_id2={{res_id2}}&dateStart={{dateStart}}&dateEnd={{dateEnd}}&timeStart={{timeStart}}&timeEnd={{timeEnd}}" style="color: black">Tempo médio que os clientes permanecem no restaurante</a></li>
            {%else%}
            <li><a href="{% url 'VisualizarEstatisticas_epaco_3' %}?res_id={{res_id}}&res_id2={{res_id2}}&dateStart={{dateStart}}&dateEnd={{dateEnd}}&timeStart={{timeStart}}&timeEnd={{timeEnd}}" style="color: black">Tempo médio que os clientes permanecem no restaurante
            </a></li>
            {% endif %}
        </ul>
        <br>

        <form method="get" action="">
            <div class="form-inline">
                <div>
                    <label for="res_id">Selecione o restaurante:</label>
                    <select name="res_id" id="res_id" style="height: 35px; width: auto;">
                        {% for res in restaurantes %}
                            
                            {% if res_id == res.id %}
                                <option selected="true" value="{{res.id}}">{{res.nome}}</option>
                            {% else %}
                                <option value="{{res.id}}">{{res.nome}}</option>
                            {% endif %}
                        
                        {% endfor %}
                    </select>
                    &nbsp;&nbsp;
                    {% if tam != 0 %}
                    <label for="res_id2">Comparar com o restaurante:</label>
                    <select name="res_id2" id="res_id2" style="height: 35px; width: auto;">

                        <option value="0">--------------</option>
                        {% for res in restaurante_comp %}
                            
                            {% if res_id2 == res.id %}
                                <option selected="true" value="{{res.id}}">{{res.nome}}</option>
                            {% else %}
                                <option value="{{res.id}}">{{res.nome}}</option>
                            {% endif %}
                        
                        {% endfor %}
                    </select>
                    {% endif %}
                </div>
            </div>
            <br>
        <div class="form-inline">
        
            <div>
                  <label for="dateStart">Data início:</label>
                  <input type="date" id="dateStart" name="dateStart" value="{{dateStart}}">
            </div>
            <div >
                <label for="dateEnd">Data fim:</label>
                <input type="date" id="dateEnd" name="dateEnd" value="{{dateEnd}}">
          </div>

          <div >
            <label for="timeStart">Tempo início:</label>
            <input type="time" id="timeStart" name="timeStart" value="{{timeStart}}" min="{{time_min}}" max="{{time_max}}">
      </div>
      <div >
          <label for="timeEnd">Tempo fim:</label>
          <input type="time" id="timeEnd" name="timeEnd" value="{{timeEnd}}" min="{{time_min}}" max="{{time_max}}">
          <button  class="btn btn-primary"  style="min-width: 80px; height: 40px;" type = "submit" > Filtrar </button>

    </div>
    
</form>
     
            
       

        <br>
<br><br>

<canvas id="myChart" width="400" height="110px"></canvas>

                            <script>
                            
                            const ctx = document.getElementById('myChart');
                            const myChart = new Chart(ctx, {
                                type: 'bar', //tipo de grafico
                                data: {
                                    
                                    labels: {{dias | safe}}, //meter label como intervalo de tempo
                                    datasets: [{
                                        label: '',
                                        data:{{data}}, //valores
                                        backgroundColor: [
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        'rgba(0, 0, 255, 0.4)',
                                        'rgba(0, 0, 120, 0.4)',
                                        
                                                        ], 
                                            borderColor: [
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        'rgba(0, 0, 0, 1)',
                                                        
                                                       ],
                                        borderWidth: 1
                                    }]
                                },
                                options: {
                                    responsive: true,
                                    title: {
                                      display: true,
                                      text: '{{titulo}}'
                                    },
                                    tooltips: {
                                      mode: 'label',
                                    },
                                    hover: {
                                      mode: 'nearest',
                                      intersect: true
                                    },
                                    scales: {
                                      xAxes: [{
                                        display: true,
                                        scaleLabel: {
                                          display: true,
                                          labelString: '{{xlabel}}'
                                        }
                                      }],
                                      yAxes: [{
                                        display: true,
                                        scaleLabel: {
                                          display: true,
                                          labelString: '{{ylabel}}'
                                        },
                                        ticks: {
                                            beginAtZero: true
                                        }
                                      }]
                                    }
                                  }
                            });
                            </script>
        </div>
        
    </div>
</div>

<br><br>
<canvas id="myChart" width="400" height="100"></canvas>  
<br><br>
  </body>
  

  {% endblock %}
</html>